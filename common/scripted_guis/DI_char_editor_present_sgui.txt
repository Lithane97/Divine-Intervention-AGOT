### Add All Lifestyle Perks
DI_present_add_lifestyle_all = {
	scope = chracter

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_martial_present_effect = yes
				lifestyle_diplomacy_present_effect = yes
				lifestyle_stewardship_present_effect = yes
				lifestyle_intrigue_present_effect = yes
				lifestyle_learning_present_effect = yes
			}
		}
		else = { 
			lifestyle_martial_present_effect = yes
			lifestyle_diplomacy_present_effect = yes
			lifestyle_stewardship_present_effect = yes
			lifestyle_intrigue_present_effect = yes
			lifestyle_learning_present_effect = yes
		}
	}
}

### Remvoe All Lifestyle Perks
DI_present_remove_lifestyle_all = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_martial_present_no_effect = yes
				lifestyle_diplomacy_present_no_effect = yes
				lifestyle_stewardship_present_no_effect = yes
				lifestyle_intrigue_present_no_effect = yes
				lifestyle_learning_present_no_effect = yes
			}
		}
		else = {
			lifestyle_martial_present_no_effect = yes
			lifestyle_diplomacy_present_no_effect = yes
			lifestyle_stewardship_present_no_effect = yes
			lifestyle_intrigue_present_no_effect = yes
			lifestyle_learning_present_no_effect = yes
		}
	}
}

### Add All Martial Lifestyle Perks
DI_present_add_lifestyle_martial = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_martial_present_effect = yes
			}
		}
		else = {
			lifestyle_martial_present_effect = yes
		}
	}
}

### Remove All Martial Lifestyle Perks
DI_present_remove_lifestyle_martial = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_martial_present_no_effect = yes
			}
		}
		else = {
			lifestyle_martial_present_no_effect = yes
		}
	}
}

### Add All Diplomacy Lifestyle Perks
DI_present_add_lifestyle_diplomacy = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_diplomacy_present_effect = yes
			}
		}
		else = {
			lifestyle_diplomacy_present_effect = yes
		}
	}
}

### Remove All Diplomacy Lifestyle Perks
DI_present_remove_lifestyle_diplomacy = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_diplomacy_present_no_effect = yes
			}
		}
		else = {
			lifestyle_diplomacy_present_no_effect = yes
		}
	}
}

### Add All stewardship Lifestyle Perks
DI_present_add_lifestyle_stewardship = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_stewardship_present_effect = yes
			}
		}
		else = {
			lifestyle_stewardship_present_effect = yes
		}
	}
}

### Remove All stewardship Lifestyle Perks
DI_present_remove_lifestyle_stewardship = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_stewardship_present_no_effect = yes
			}
		}
		else = {
			lifestyle_stewardship_present_no_effect = yes
		}
	}
}

### Add All intrigue Lifestyle Perks
DI_present_add_lifestyle_intrigue = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_intrigue_present_effect = yes
			}
		}
		else = {
			lifestyle_intrigue_present_effect = yes
		}
	}
}

### Remove All intrigue Lifestyle Perks
DI_present_remove_lifestyle_intrigue = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_intrigue_present_no_effect = yes
			}
		}
		else = {
			lifestyle_intrigue_present_no_effect = yes
		}
	}
}

### Add All learning Lifestyle Perks
DI_present_add_lifestyle_learning = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				lifestyle_learning_present_effect = yes
			}
		}
		else = {
			lifestyle_learning_present_effect = yes
		}
	}
}

### Remove All learning Lifestyle Perks
DI_present_remove_lifestyle_learning = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = { 
					has_character_flag = marked_for_edit
				}
				lifestyle_learning_present_no_effect = yes
			}
		}
		else = {
			lifestyle_learning_present_no_effect = yes
		}
	}
}

### Eliminate Health Issues
DI_present_health_eliminate_issues = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
			set_weight_0 = yes
			eliminated_health_problem_effect = yes
			}
		}
		else = {
			set_weight_0 = yes
			eliminated_health_problem_effect = yes
		}
	}
}

### Add Good Health Genes
DI_present_health_add_good_genes = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_health_conflict_effect = yes

				add_trait = physique_good_3
				add_trait = intellect_good_3
				add_trait = beauty_good_3
				add_trait = pure_blooded
				add_trait = fecund
			}
		}
		else = {
			remove_health_conflict_effect = yes
			add_trait = physique_good_3
			add_trait = intellect_good_3
			add_trait = beauty_good_3
			add_trait = pure_blooded
			add_trait = fecund
		}
	}
}

### Remove Good Health Genes
DI_present_health_remove_good_genes = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}

				remove_trait = physique_good_3
				remove_trait = intellect_good_3
				remove_trait = beauty_good_3
				remove_trait = pure_blooded
				remove_trait = fecund
			}
		}
		else = {
			remove_trait = physique_good_3
			remove_trait = intellect_good_3
			remove_trait = beauty_good_3
			remove_trait = pure_blooded
			remove_trait = fecund
		}
	}
}

### Add Bad Health Traits
DI_present_health_add_bad_genes = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_health_conflict_forbadgene_effect = yes
				remove_trait = physique_good_3
				remove_trait = intellect_good_3
				remove_trait = beauty_good_3
				remove_trait = pure_blooded
				remove_trait = fecund
				add_trait = beauty_bad_3
				add_trait = intellect_bad_3
				add_trait = physique_bad_3
				add_trait = inbred
				add_trait = impotent
			}
		}
		else = {
			remove_health_conflict_forbadgene_effect = yes
			remove_trait = physique_good_3
			remove_trait = intellect_good_3
			remove_trait = beauty_good_3
			remove_trait = pure_blooded
			remove_trait = fecund
			add_trait = beauty_bad_3
			add_trait = intellect_bad_3
			add_trait = physique_bad_3
			add_trait = inbred
			add_trait = impotent
		}
	}
}

### Remove Bad Health Traits
DI_present_health_remove_bad_genes = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = { 
					has_character_flag = marked_for_edit
				}
				remove_trait = beauty_bad_3
				remove_trait = intellect_bad_3
				remove_trait = physique_bad_3
				remove_trait = inbred
				remove_trait = impotent
			}
		}
		else = {
			remove_trait = beauty_bad_3
			remove_trait = intellect_bad_3
			remove_trait = physique_bad_3
			remove_trait = inbred
			remove_trait = impotent
		}
	}
}

### No stress change
DI_present_health_add_no_stress_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				add_character_modifier = no_stress_change 
			}
		}
		else = {
			add_character_modifier = no_stress_change
		}
	}
}

DI_present_health_remove_no_stress_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_character_modifier = no_stress_change 
			}
		}
		else = {
			remove_character_modifier = no_stress_change
		}
	}
}

### No tyranny change
DI_present_health_add_no_tyranny_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				add_character_modifier = no_tyranny_change 
			}
		}
		else = {
			add_character_modifier = no_tyranny_change
		}
	}
}

DI_present_health_remove_no_tyranny_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_character_modifier = no_tyranny_change 
			}
		}
		else = {
			remove_character_modifier = no_tyranny_change
		}
	}
}

### No dread change
DI_present_health_add_no_dread_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				add_character_modifier = no_dread_change 
			}
		}
		else = {
			add_character_modifier = no_dread_change
		}
	}
}

DI_present_health_remove_no_dread_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_character_modifier = no_dread_change 
			}
		}
		else = {
			remove_character_modifier = no_dread_change
		}
	}
}

### Randomize Three Personality Traits
DI_present_traits_randomize = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				clear_personality_traits_effect = yes
				personality_trait_randomizer_effect = yes
			}
		}
		else = {
			clear_personality_traits_effect = yes
			personality_trait_randomizer_effect = yes
		}
	}
}

### Add Special Mod Traits
DI_present_traits_add_special = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				add_trait = immortal
				set_immortal_age = 30
				add_trait = 100_stat_man
				add_trait = nnn_challenger
				add_trait = build_speed_cheat
				add_trait = stress_gain_remove
				add_trait = tyranny_gain_remove
			}
		}
		else = {
			add_trait = immortal
			set_immortal_age = 30
			add_trait = 100_stat_man
			add_trait = nnn_challenger
			add_trait = build_speed_cheat
			add_trait = stress_gain_remove
			add_trait = tyranny_gain_remove
		}
	}
}

### Remove Special Mod Traits
DI_present_traits_remove_special = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_trait = immortal
				remove_trait = 100_stat_man
				remove_trait = nnn_challenger
				remove_trait = build_speed_cheat
				remove_trait = stress_gain_remove
				remove_trait = tyranny_gain_remove
			}
		}
		else = {
			remove_trait = immortal
			remove_trait = 100_stat_man
			remove_trait = nnn_challenger
			remove_trait = build_speed_cheat
			remove_trait = stress_gain_remove
			remove_trait = tyranny_gain_remove
		}
	}
}

### Add All Commander Traits
DI_present_traits_add_commander = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				add_commander_traits_effect = yes
			}
		}
		else = {
			add_commander_traits_effect = yes
		}
	}
}

### Remove All Commander Traits
DI_present_traits_remove_commander = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_commander_traits_effect = yes
			}
		}
		else = {
			remove_commander_traits_effect = yes
		}
	}
}

### Add Character traits that make the character a giant
DI_present_traits_add_giant = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_trait = dwarf
				remove_trait = physique_good_1
				remove_trait = physique_good_2
				remove_trait = physique_bad_1
				remove_trait = physique_bad_2
				remove_trait = physique_bad_3
				change_current_weight = 100
				add_trait = physique_good_3
				add_trait = giant
			}
		}
		else = {
			remove_trait = dwarf
			remove_trait = physique_good_1
			remove_trait = physique_good_2
			remove_trait = physique_bad_1
			remove_trait = physique_bad_2
			remove_trait = physique_bad_3
			change_current_weight = 100
			add_trait = physique_good_3
			add_trait = giant
		}
	}
}

### Remove Traits Giant
DI_present_traits_remove_giant = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				set_weight_0 = yes
				remove_trait = physique_good_3
				remove_trait = giant
			}
		}
		else = {
			set_weight_0 = yes
			remove_trait = physique_good_3
			remove_trait = giant
		}
	}
}

### Add Character traits that make the character a midget
DI_present_traits_add_midget = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_trait = giant
				remove_trait = physique_good_1
				remove_trait = physique_good_2
				remove_trait = physique_good_3
				remove_trait = physique_bad_1
				remove_trait = physique_bad_2
				change_current_weight = 0
				add_trait = physique_bad_3
				add_trait = dwarf
			}
		}
		else = {
			remove_trait = giant
			remove_trait = physique_good_1
			remove_trait = physique_good_2
			remove_trait = physique_good_3
			remove_trait = physique_bad_1
			remove_trait = physique_bad_2
			change_current_weight = 0
			add_trait = physique_bad_3
			add_trait = dwarf
		}
	}
}

### Remove Traits Midget
DI_present_traits_remove_midget = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_trait = physique_bad_3
				remove_trait = dwarf
			}
		}
		else = {
			remove_trait = physique_bad_3
			remove_trait = dwarf
		}
	}
}

### Add Character traits that make the character ghostly
DI_present_traits_add_ghostly = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				change_current_weight = 0
				add_trait = albino
				add_trait = spindly
			}
		}
		else = {
			change_current_weight = 0
			add_trait = albino
			add_trait = spindly
		}
	}
}

### Remove Traits Ghostly
DI_present_traits_remove_ghostly = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				remove_trait = albino
				remove_trait = spindly
			}
		}
		else = {
			remove_trait = albino
			remove_trait = spindly
		}
	}
}

### Present Innovation Remove All Innovations
DI_present_remove_all_innovations = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target

				scope:target.culture = {
					innovation_remove_all_effect = yes
				}
			}
		}
		else = {
			innovation_remove_all_effect = yes
		}
	}
}

### Present Innovation Add All Regional Innovations
DI_present_innovation_regional = {
	scope = character

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target

				scope:target.culture = {
					innovation_tribal_regional_effect = yes
					innovation_early_medival_regional_effect = yes
					innovation_high_medival_regional_effect = yes
					innovation_late_medival_regional_effect = yes
				}
			}
		}
		else = {
			innovation_tribal_regional_effect = yes
			innovation_early_medival_regional_effect = yes
			innovation_high_medival_regional_effect = yes
			innovation_late_medival_regional_effect = yes
		}
	}
}

### Present Innovation Add All Local Innovations
DI_present_innovation_local = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_tribal_effect = yes
					innovation_early_medival_effect = yes
					innovation_high_medival_effect = yes
					innovation_late_medival_effect = yes
				}
			}
		}
		else = {
			innovation_tribal_effect = yes
			innovation_early_medival_effect = yes
			innovation_high_medival_effect = yes
			innovation_late_medival_effect = yes
		}
	}
}

### Add Regional Tribal Innovations
DI_present_innovation_regional_tribal = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_tribal_regional_effect = yes	
				}	
			}
		}
		else = {
			innovation_tribal_regional_effect = yes
		}
	}
}

### Add Regional Early Medival Innovations
DI_present_innovation_regional_early = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_early_medival_regional_effect = yes		
				}
			}
		}
		else = {
			innovation_early_medival_regional_effect = yes
		}
	}
}

### Add Regional High Medival Innovations
DI_present_innovation_regional_high = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_high_medival_regional_effect = yes	
				}	
			}
		}
		else = {
			innovation_high_medival_regional_effect = yes
		}
	}
}

### Add Regional Late Medival Innovations
DI_present_innovation_regional_late = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_late_medival_regional_effect = yes	
				}	
			}
		}
		else = {
			innovation_late_medival_regional_effect = yes
		}
	}
}

### Add All Local Tribal Innovations
DI_present_innovation_tribal = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_tribal_effect = yes	
				}	
			}
		}
		else = {
			innovation_tribal_effect = yes
		}
	}
}

### Add All Local Early Medival Innovations
DI_present_innovation_early = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_early_medival_effect = yes	
				}	
			}
		}
		else = {
			innovation_early_medival_effect = yes
		}
	}
}

### Add All Local High Medival Innovations
DI_present_innovation_high = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_high_medival_effect = yes	
				}	
			}
		}
		else = {
			innovation_high_medival_effect = yes
		}
	}
}

### Add All Local Late Medival Innovations
DI_present_innovation_late = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_late_medival_effect = yes
				}		
			}
		}
		else = {
			innovation_late_medival_effect = yes
		}
	}
}

### Tribal Innovations
### Longboats
DI_present_innovation_longboats = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_longboats
							}
						}
						add_innovation = innovation_longboats
					}
					else = {
						remove_innovation = innovation_longboats
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_longboats
					}
				}
				add_innovation = innovation_longboats
			}
			else = {
				remove_innovation = innovation_longboats
			}
		}
	}
}

### elephantry
DI_present_innovation_elephantry = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_elephantry
							}
						}
						add_innovation = innovation_elephantry
					}
					else = {
						remove_innovation = innovation_elephantry
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_elephantry
					}
				}
				add_innovation = innovation_elephantry
			}
			else = {
				remove_innovation = innovation_elephantry
			}
		}
	}
}

### war camels
DI_present_innovation_war_camels = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_war_camels
							}
						}
						add_innovation = innovation_war_camels
					}
					else = {
						remove_innovation = innovation_war_camels
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_war_camels
					}
				}
				add_innovation = innovation_war_camels
			}
			else = {
				remove_innovation = innovation_war_camels
			}
		}
	}
}

### All Things
DI_present_innovation_all_things = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_all_things
							}
						}
						add_innovation = innovation_all_things
					}
					else = {
						remove_innovation = innovation_all_things
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_all_things
					}
				}
				add_innovation = innovation_all_things
			}
			else = {
				remove_innovation = innovation_all_things
			}
		}
	}
}

### Unsullied
DI_present_innovation_unsullied = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_unsullied
							}
						}
						add_innovation = innovation_unsullied
					}
					else = {
						remove_innovation = innovation_unsullied
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_unsullied
					}
				}
				add_innovation = innovation_unsullied
			}
			else = {
				remove_innovation = innovation_unsullied
			}
		}
	}
}

### Tribal Local Innovations
### Mottes
DI_present_innovation_motte = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_motte
							}
						}
						add_innovation = innovation_motte
					}
					else = {
						remove_innovation = innovation_motte
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_motte
					}
				}
				add_innovation = innovation_motte
			}
			else = {
				remove_innovation = innovation_motte
			}
		}
	}
}

### Catapult
DI_present_innovation_catapult = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_catapult
							}
						}
						add_innovation = innovation_catapult
					}
					else = {
						remove_innovation = innovation_catapult
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_catapult
					}
				}
				add_innovation = innovation_catapult
			}
			else = {
				remove_innovation = innovation_catapult
			}
		}
	}
}

### Barracks
DI_present_innovation_barracks = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_barracks
							}
						}
						add_innovation = innovation_barracks
					}
					else = {
						remove_innovation = innovation_barracks
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_barracks
					}
				}
				add_innovation = innovation_barracks
			}
			else = {
				remove_innovation = innovation_barracks
			}
		}
	}
}

### Mustering Grounds
DI_present_innovation_mustering_grounds = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_mustering_grounds
							}
						}
						add_innovation = innovation_mustering_grounds
					}
					else = {
						remove_innovation = innovation_mustering_grounds
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_mustering_grounds
					}
				}
				add_innovation = innovation_mustering_grounds
			}
			else = {
				remove_innovation = innovation_mustering_grounds
			}
		}
	}
}

### Bannus
DI_present_innovation_bannus = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_bannus
							}
						}
						add_innovation = innovation_bannus
					}
					else = {
						remove_innovation = innovation_bannus
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_bannus
					}
				}
				add_innovation = innovation_bannus
			}
			else = {
				remove_innovation = innovation_bannus
			}
		}
	}
}

### Quilted Armor
DI_present_innovation_quilted_armor = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_quilted_armor
							}
						}
						add_innovation = innovation_quilted_armor
					}
					else = {
						remove_innovation = innovation_quilted_armor
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_quilted_armor
					}
				}
				add_innovation = innovation_quilted_armor
			}
			else = {
				remove_innovation = innovation_quilted_armor
			}
		}
	}
}

### Public Works
DI_present_innovation_development_01 = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_development_01
							}
						}
						add_innovation = innovation_development_01
					}
					else = {
						remove_innovation = innovation_development_01
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_development_01
					}
				}
				add_innovation = innovation_development_01
			}
			else = {
				remove_innovation = innovation_development_01
			}
		}
	}
}

### Currency
DI_present_innovation_currency_01 = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_currency_01
							}
						}
						add_innovation = innovation_currency_01
					}
					else = {
						remove_innovation = innovation_currency_01
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_currency_01
					}
				}
				add_innovation = innovation_currency_01
			}
			else = {
				remove_innovation = innovation_currency_01
			}
		}
	}
}

### Gavelkind
DI_present_innovation_gavelkind = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_gavelkind
							}
						}
						add_innovation = innovation_gavelkind
					}
					else = {
						remove_innovation = innovation_gavelkind
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_gavelkind
					}
				}
				add_innovation = innovation_gavelkind
			}
			else = {
				remove_innovation = innovation_gavelkind
			}
		}
	}
}

### Crop Rotation
DI_present_innovation_crop_rotation = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_crop_rotation
							}
						}
						add_innovation = innovation_crop_rotation
					}
					else = {
						remove_innovation = innovation_crop_rotation
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_crop_rotation
					}
				}
				add_innovation = innovation_crop_rotation
			}
			else = {
				remove_innovation = innovation_crop_rotation
			}
		}
	}
}

### City Planning
DI_present_innovation_city_planning = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_city_planning
							}
						}
						add_innovation = innovation_city_planning
					}
					else = {
						remove_innovation = innovation_city_planning
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_city_planning
					}
				}
				add_innovation = innovation_city_planning
			}
			else = {
				remove_innovation = innovation_city_planning
			}
		}
	}
}

### Casus Belli
DI_present_innovation_casus_belli = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_casus_belli
							}
						}
						add_innovation = innovation_casus_belli
					}
					else = {
						remove_innovation = innovation_casus_belli
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_casus_belli
					}
				}
				add_innovation = innovation_casus_belli
			}
			else = {
				remove_innovation = innovation_casus_belli
			}
		}
	}
}

### Plenary Assemblies
DI_present_innovation_plenary_assemblies = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_plenary_assemblies
							}
						}
						add_innovation = innovation_plenary_assemblies
					}
					else = {
						remove_innovation = innovation_plenary_assemblies
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_plenary_assemblies
					}
				}
				add_innovation = innovation_plenary_assemblies
			}
			else = {
				remove_innovation = innovation_plenary_assemblies
			}
		}
	}
}

### Ledger
DI_present_innovation_ledger = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_ledger
							}
						}
						add_innovation = innovation_ledger
					}
					else = {
						remove_innovation = innovation_ledger
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_ledger
					}
				}
				add_innovation = innovation_ledger
			}
			else = {
				remove_innovation = innovation_ledger
			}
		}
	}
}

### Early Medival Local Innovation Selection
### Battlements
DI_present_innovation_battlements = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_battlements
							}
						}
						add_innovation = innovation_battlements
					}
					else = {
						remove_innovation = innovation_battlements
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_battlements
					}
				}
				add_innovation = innovation_battlements
			}
			else = {
				remove_innovation = innovation_battlements
			}
		}
	}
}

### Mangonel
DI_present_innovation_mangonel = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_mangonel
							}
						}
						add_innovation = innovation_mangonel
					}
					else = {
						remove_innovation = innovation_mangonel
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_mangonel
					}
				}
				add_innovation = innovation_mangonel
			}
			else = {
				remove_innovation = innovation_mangonel
			}
		}
	}
}

### Burhs
DI_present_innovation_burhs = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_burhs
							}
						}
						add_innovation = innovation_burhs
					}
					else = {
						remove_innovation = innovation_burhs
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_burhs
					}
				}
				add_innovation = innovation_burhs
			}
			else = {
				remove_innovation = innovation_burhs
			}
		}
	}
}

### House Soldiers
DI_present_innovation_house_soldiers = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_house_soldiers
							}
						}
						add_innovation = innovation_house_soldiers
					}
					else = {
						remove_innovation = innovation_house_soldiers
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_house_soldiers
					}
				}
				add_innovation = innovation_house_soldiers
			}
			else = {
				remove_innovation = innovation_house_soldiers
			}
		}
	}
}

### Horseshoes
DI_present_innovation_horseshoes = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_horseshoes
							}
						}
						add_innovation = innovation_horseshoes
					}
					else = {
						remove_innovation = innovation_horseshoes
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_horseshoes
					}
				}
				add_innovation = innovation_horseshoes
			}
			else = {
				remove_innovation = innovation_horseshoes
			}
		}
	}
}

### Arched Saddle
DI_present_innovation_arched_saddle = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_arched_saddle
							}
						}
						add_innovation = innovation_arched_saddle
					}
					else = {
						remove_innovation = innovation_arched_saddle
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_arched_saddle
					}
				}
				add_innovation = innovation_arched_saddle
			}
			else = {
				remove_innovation = innovation_arched_saddle
			}
		}
	}
}

### Hereditary Rule
DI_present_innovation_hereditary_rule = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_hereditary_rule
							}
						}
						add_innovation = innovation_hereditary_rule
					}
					else = {
						remove_innovation = innovation_hereditary_rule
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_hereditary_rule
					}
				}
				add_innovation = innovation_hereditary_rule
			}
			else = {
				remove_innovation = innovation_hereditary_rule
			}
		}
	}
}

### Manroialism
DI_present_innovation_manorialism = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_manorialism
							}
						}
						add_innovation = innovation_manorialism
					}
					else = {
						remove_innovation = innovation_manorialism
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_manorialism
					}
				}
				add_innovation = innovation_manorialism
			}
			else = {
				remove_innovation = innovation_manorialism
			}
		}
	}
}

### Communal Government
DI_present_innovation_development_02 = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_development_02
							}
						}
						add_innovation = innovation_development_02
					}
					else = {
						remove_innovation = innovation_development_02
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_development_02
					}
				}
				add_innovation = innovation_development_02
			}
			else = {
				remove_innovation = innovation_development_02
			}
		}
	}
}

### Coinage
DI_present_innovation_currency_02 = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_currency_02
							}
						}
						add_innovation = innovation_currency_02
					}
					else = {
						remove_innovation = innovation_currency_02
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_currency_02
					}
				}
				add_innovation = innovation_currency_02
			}
			else = {
				remove_innovation = innovation_currency_02
			}
		}
	}
}

### Royal Prerogative
DI_present_innovation_royal_prerogative = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_royal_prerogative
							}
						}
						add_innovation = innovation_royal_prerogative
					}
					else = {
						remove_innovation = innovation_royal_prerogative
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_royal_prerogative
					}
				}
				add_innovation = innovation_royal_prerogative
			}
			else = {
				remove_innovation = innovation_royal_prerogative
			}
		}
	}
}

### Chronicle Writing
DI_present_innovation_chronicle_writing = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_chronicle_writing
							}
						}
						add_innovation = innovation_chronicle_writing
					}
					else = {
						remove_innovation = innovation_chronicle_writing
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_chronicle_writing
					}
				}
				add_innovation = innovation_chronicle_writing
			}
			else = {
				remove_innovation = innovation_chronicle_writing
			}
		}
	}
}

### Armilary Sphere
DI_present_innovation_armilary_sphere = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_armilary_sphere
							}
						}
						add_innovation = innovation_armilary_sphere
					}
					else = {
						remove_innovation = innovation_armilary_sphere
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_armilary_sphere
					}
				}
				add_innovation = innovation_armilary_sphere
			}
			else = {
				remove_innovation = innovation_armilary_sphere
			}
		}
	}
}

### Baliffs
DI_present_innovation_baliffs = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_baliffs
							}
						}
						add_innovation = innovation_baliffs
					}
					else = {
						remove_innovation = innovation_baliffs
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_baliffs
					}
				}
				add_innovation = innovation_baliffs
			}
			else = {
				remove_innovation = innovation_baliffs
			}
		}
	}
}

### High Medival Local Innovation Selection
### Hoardings
DI_present_innovation_hoardings = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_hoardings
							}
						}
						add_innovation = innovation_hoardings
					}
					else = {
						remove_innovation = innovation_hoardings
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_hoardings
					}
				}
				add_innovation = innovation_hoardings
			}
			else = {
				remove_innovation = innovation_hoardings
			}
		}
	}
}

### Trebuchet
DI_present_innovation_trebuchet = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_trebuchet
							}
						}
						add_innovation = innovation_trebuchet
					}
					else = {
						remove_innovation = innovation_trebuchet
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_trebuchet
					}
				}
				add_innovation = innovation_trebuchet
			}
			else = {
				remove_innovation = innovation_trebuchet
			}
		}
	}
}

### Castle Baileys
DI_present_innovation_castle_baileys = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_castle_baileys
							}
						}
						add_innovation = innovation_castle_baileys
					}
					else = {
						remove_innovation = innovation_castle_baileys
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_castle_baileys
					}
				}
				add_innovation = innovation_castle_baileys
			}
			else = {
				remove_innovation = innovation_castle_baileys
			}
		}
	}
}

### Men at Arms
DI_present_innovation_men_at_arms = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_men_at_arms
							}
						}
						add_innovation = innovation_men_at_arms
					}
					else = {
						remove_innovation = innovation_men_at_arms
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_men_at_arms
					}
				}
				add_innovation = innovation_men_at_arms
			}
			else = {
				remove_innovation = innovation_men_at_arms
			}
		}
	}
}

### Knighthood
DI_present_innovation_knighthood = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_knighthood
							}
						}
						add_innovation = innovation_knighthood
					}
					else = {
						remove_innovation = innovation_knighthood
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_knighthood
					}
				}
				add_innovation = innovation_knighthood
			}
			else = {
				remove_innovation = innovation_knighthood
			}
		}
	}
}

### Advanced Bowmaking
DI_present_innovation_advanced_bowmaking = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_advanced_bowmaking
							}
						}
						add_innovation = innovation_advanced_bowmaking
					}
					else = {
						remove_innovation = innovation_advanced_bowmaking
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_advanced_bowmaking
					}
				}
				add_innovation = innovation_advanced_bowmaking
			}
			else = {
				remove_innovation = innovation_advanced_bowmaking
			}
		}
	}
}

### Heraldry
DI_present_innovation_heraldry = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_heraldry
							}
						}
						add_innovation = innovation_heraldry
					}
					else = {
						remove_innovation = innovation_heraldry
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_heraldry
					}
				}
				add_innovation = innovation_heraldry
			}
			else = {
				remove_innovation = innovation_heraldry
			}
		}
	}
}

### Windmills
DI_present_innovation_windmills = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_windmills
							}
						}
						add_innovation = innovation_windmills
					}
					else = {
						remove_innovation = innovation_windmills
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_windmills
					}
				}
				add_innovation = innovation_windmills
			}
			else = {
				remove_innovation = innovation_windmills
			}
		}
	}
}

### Divine Right
DI_present_innovation_divine_right = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_divine_right
							}
						}
						add_innovation = innovation_divine_right
					}
					else = {
						remove_innovation = innovation_divine_right
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_divine_right
					}
				}
				add_innovation = innovation_divine_right
			}
			else = {
				remove_innovation = innovation_divine_right
			}
		}
	}
}

### Land Grants
DI_present_innovation_land_grants = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_land_grants
							}
						}
						add_innovation = innovation_land_grants
					}
					else = {
						remove_innovation = innovation_land_grants
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_land_grants
					}
				}
				add_innovation = innovation_land_grants
			}
			else = {
				remove_innovation = innovation_land_grants
			}
		}
	}
}

### Scutage
DI_present_innovation_scutage = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_scutage
							}
						}
						add_innovation = innovation_scutage
					}
					else = {
						remove_innovation = innovation_scutage
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_scutage
					}
				}
				add_innovation = innovation_scutage
			}
			else = {
				remove_innovation = innovation_scutage
			}
		}
	}
}

### Guilds
DI_present_innovation_guilds = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_guilds
							}
						}
						add_innovation = innovation_guilds
					}
					else = {
						remove_innovation = innovation_guilds
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_guilds
					}
				}
				add_innovation = innovation_guilds
			}
			else = {
				remove_innovation = innovation_guilds
			}
		}
	}
}

### Urbanization
DI_present_innovation_development_03 = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_development_03
							}
						}
						add_innovation = innovation_development_03
					}
					else = {
						remove_innovation = innovation_development_03
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_development_03
					}
				}
				add_innovation = innovation_development_03
			}
			else = {
				remove_innovation = innovation_development_03
			}
		}
	}
}

### Banking
DI_present_innovation_currency_03 = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_currency_03
							}
						}
						add_innovation = innovation_currency_03
					}
					else = {
						remove_innovation = innovation_currency_03
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_currency_03
					}
				}
				add_innovation = innovation_currency_03
			}
			else = {
				remove_innovation = innovation_currency_03
			}
		}
	}
}

### Late Medival Local Innovation Selection
### machicolations
DI_present_innovation_machicolations = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_machicolations
							}
						}
						add_innovation = innovation_machicolations
					}
					else = {
						remove_innovation = innovation_machicolations
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_machicolations
					}
				}
				add_innovation = innovation_machicolations
			}
			else = {
				remove_innovation = innovation_machicolations
			}
		}
	}
}

### Royal Armory
DI_present_innovation_royal_armory = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_royal_armory
							}
						}
						add_innovation = innovation_royal_armory
					}
					else = {
						remove_innovation = innovation_royal_armory
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_royal_armory
					}
				}
				add_innovation = innovation_royal_armory
			}
			else = {
				remove_innovation = innovation_royal_armory
			}
		}
	}
}

### Standing Armies
DI_present_innovation_standing_armies = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_standing_armies
							}
						}
						add_innovation = innovation_standing_armies
					}
					else = {
						remove_innovation = innovation_standing_armies
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_standing_armies
					}
				}
				add_innovation = innovation_standing_armies
			}
			else = {
				remove_innovation = innovation_standing_armies
			}
		}
	}
}

### Sappers
DI_present_innovation_sappers = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_sappers
							}
						}
						add_innovation = innovation_sappers
					}
					else = {
						remove_innovation = innovation_sappers
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_sappers
					}
				}
				add_innovation = innovation_sappers
			}
			else = {
				remove_innovation = innovation_sappers
			}
		}
	}
}

### Plate Armor
DI_present_innovation_plate_armor = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_plate_armor
							}
						}
						add_innovation = innovation_plate_armor
					}
					else = {
						remove_innovation = innovation_plate_armor
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_plate_armor
					}
				}
				add_innovation = innovation_plate_armor
			}
			else = {
				remove_innovation = innovation_plate_armor
			}
		}
	}
}

### Cranes
DI_present_innovation_cranes = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_cranes
							}
						}
						add_innovation = innovation_cranes
					}
					else = {
						remove_innovation = innovation_cranes
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_cranes
					}
				}
				add_innovation = innovation_cranes
			}
			else = {
				remove_innovation = innovation_cranes
			}
		}
	}
}

### Noblesse Oblige
DI_present_innovation_noblesse_oblige = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_noblesse_oblige
							}
						}
						add_innovation = innovation_noblesse_oblige
					}
					else = {
						remove_innovation = innovation_noblesse_oblige
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_noblesse_oblige
					}
				}
				add_innovation = innovation_noblesse_oblige
			}
			else = {
				remove_innovation = innovation_noblesse_oblige
			}
		}
	}
}

### Rightful Ownership
DI_present_innovation_rightful_ownership = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_rightful_ownership
							}
						}
						add_innovation = innovation_rightful_ownership
					}
					else = {
						remove_innovation = innovation_rightful_ownership
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_rightful_ownership
					}
				}
				add_innovation = innovation_rightful_ownership
			}
			else = {
				remove_innovation = innovation_rightful_ownership
			}
		}
	}
}

### Ermine CLoaks
DI_present_innovation_ermine_cloaks = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_ermine_cloaks
							}
						}
						add_innovation = innovation_ermine_cloaks
					}
					else = {
						remove_innovation = innovation_ermine_cloaks
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_ermine_cloaks
					}
				}
				add_innovation = innovation_ermine_cloaks
			}
			else = {
				remove_innovation = innovation_ermine_cloaks
			}
		}
	}
}

### Court Officials
DI_present_innovation_court_officials = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_court_officials
							}
						}
						add_innovation = innovation_court_officials
					}
					else = {
						remove_innovation = innovation_court_officials
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_court_officials
					}
				}
				add_innovation = innovation_court_officials
			}
			else = {
				remove_innovation = innovation_court_officials
			}
		}
	}
}

### Renaissance Thought
DI_present_innovation_development_04 = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_development_04
							}
						}
						add_innovation = innovation_development_04
					}
					else = {
						remove_innovation = innovation_development_04
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_development_04
					}
				}
				add_innovation = innovation_development_04
			}
			else = {
				remove_innovation = innovation_development_04
			}
		}
	}
}

### Promissory Notes
DI_present_innovation_currency_04 = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_currency_04
							}
						}
						add_innovation = innovation_currency_04
					}
					else = {
						remove_innovation = innovation_currency_04
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_currency_04
					}
				}
				add_innovation = innovation_currency_04
			}
			else = {
				remove_innovation = innovation_currency_04
			}
		}
	}
}

### AGOT Added Innovations
### Outriders
DI_present_innovation_outriders = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_outriders
							}
						}
						add_innovation = innovation_outriders
					}
					else = {
						remove_innovation = innovation_outriders
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_outriders
					}
				}
				add_innovation = innovation_outriders
			}
			else = {
				remove_innovation = innovation_outriders
			}
		}
	}
}

### Primogeniture Westeros
DI_present_innovation_primogeniture_westeros = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_primogeniture_westeros
							}
						}
						add_innovation = innovation_primogeniture_westeros
					}
					else = {
						remove_innovation = innovation_primogeniture_westeros
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_primogeniture_westeros
					}
				}
				add_innovation = innovation_primogeniture_westeros
			}
			else = {
				remove_innovation = innovation_primogeniture_westeros
			}
		}
	}
}


### Maesters
DI_present_innovation_maesters = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_maesters
							}
						}
						add_innovation = innovation_maesters
					}
					else = {
						remove_innovation = innovation_maesters
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_maesters
					}
				}
				add_innovation = innovation_maesters
			}
			else = {
				remove_innovation = innovation_maesters
			}
		}
	}
}

### Goldenheart Bowmen
DI_present_innovation_goldenheart_bowmen = {
	scope = culture

	effect = {
		if = {
			limit = {
				has_global_variable = DI_marked_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = marked_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					if = {
						limit = {
							NOT = {
								has_innovation = innovation_goldenheart_bowmen
							}
						}
						add_innovation = innovation_goldenheart_bowmen
					}
					else = {
						remove_innovation = innovation_goldenheart_bowmen
					}								
				}
			}
		}
		else = {
			if = {
				limit = {
					NOT = {
						has_innovation = innovation_goldenheart_bowmen
					}
				}
				add_innovation = innovation_goldenheart_bowmen
			}
			else = {
				remove_innovation = innovation_goldenheart_bowmen
			}
		}
	}
}


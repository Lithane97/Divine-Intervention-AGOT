### Add All Lifestyle Perks
DI_present_add_lifestyle_all = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_martial_present_effect = yes
				lifestyle_diplomacy_present_effect = yes
				lifestyle_stewardship_present_effect = yes
				lifestyle_intrigue_present_effect = yes
				lifestyle_learning_present_effect = yes
			}
		}
		else = { 
			lifestyle_martial_present_effect = yes
			lifestyle_diplomacy_present_effect = yes
			lifestyle_stewardship_present_effect = yes
			lifestyle_intrigue_present_effect = yes
			lifestyle_learning_present_effect = yes
		}
	}
}

### Remvoe All Lifestyle Perks
DI_present_remove_lifestyle_all = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_martial_present_no_effect = yes
				lifestyle_diplomacy_present_no_effect = yes
				lifestyle_stewardship_present_no_effect = yes
				lifestyle_intrigue_present_no_effect = yes
				lifestyle_learning_present_no_effect = yes
			}
		}
		else = {
			lifestyle_martial_present_no_effect = yes
			lifestyle_diplomacy_present_no_effect = yes
			lifestyle_stewardship_present_no_effect = yes
			lifestyle_intrigue_present_no_effect = yes
			lifestyle_learning_present_no_effect = yes
		}
	}
}

### Add All Martial Lifestyle Perks
DI_present_add_lifestyle_martial = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_martial_present_effect = yes
			}
		}
		else = {
			lifestyle_martial_present_effect = yes
		}
	}
}

### Remove All Martial Lifestyle Perks
DI_present_remove_lifestyle_martial = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_martial_present_no_effect = yes
			}
		}
		else = {
			lifestyle_martial_present_no_effect = yes
		}
	}
}

### Add All Diplomacy Lifestyle Perks
DI_present_add_lifestyle_diplomacy = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_diplomacy_present_effect = yes
			}
		}
		else = {
			lifestyle_diplomacy_present_effect = yes
		}
	}
}

### Remove All Diplomacy Lifestyle Perks
DI_present_remove_lifestyle_diplomacy = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_diplomacy_present_no_effect = yes
			}
		}
		else = {
			lifestyle_diplomacy_present_no_effect = yes
		}
	}
}

### Add All stewardship Lifestyle Perks
DI_present_add_lifestyle_stewardship = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_stewardship_present_effect = yes
			}
		}
		else = {
			lifestyle_stewardship_present_effect = yes
		}
	}
}

### Remove All stewardship Lifestyle Perks
DI_present_remove_lifestyle_stewardship = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_stewardship_present_no_effect = yes
			}
		}
		else = {
			lifestyle_stewardship_present_no_effect = yes
		}
	}
}

### Add All intrigue Lifestyle Perks
DI_present_add_lifestyle_intrigue = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_intrigue_present_effect = yes
			}
		}
		else = {
			lifestyle_intrigue_present_effect = yes
		}
	}
}

### Remove All intrigue Lifestyle Perks
DI_present_remove_lifestyle_intrigue = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_intrigue_present_no_effect = yes
			}
		}
		else = {
			lifestyle_intrigue_present_no_effect = yes
		}
	}
}

### Add All learning Lifestyle Perks
DI_present_add_lifestyle_learning = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				lifestyle_learning_present_effect = yes
			}
		}
		else = {
			lifestyle_learning_present_effect = yes
		}
	}
}

### Remove All learning Lifestyle Perks
DI_present_remove_lifestyle_learning = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = { 
					has_character_flag = pinned_for_edit
				}
				lifestyle_learning_present_no_effect = yes
			}
		}
		else = {
			lifestyle_learning_present_no_effect = yes
		}
	}
}

### Eliminate Health Issues
DI_present_health_eliminate_issues = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
			set_weight_0 = yes
			eliminated_health_problem_effect = yes
			}
		}
		else = {
			set_weight_0 = yes
			eliminated_health_problem_effect = yes
		}
	}
}

### Add Good Health Genes
DI_present_health_add_good_genes = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_health_conflict_effect = yes

				add_trait = physique_good_3
				add_trait = intellect_good_3
				add_trait = beauty_good_3
				add_trait = pure_blooded
				add_trait = fecund
			}
		}
		else = {
			remove_health_conflict_effect = yes
			add_trait = physique_good_3
			add_trait = intellect_good_3
			add_trait = beauty_good_3
			add_trait = pure_blooded
			add_trait = fecund
		}
	}
}

### Remove Good Health Genes
DI_present_health_remove_good_genes = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}

				remove_trait = physique_good_3
				remove_trait = intellect_good_3
				remove_trait = beauty_good_3
				remove_trait = pure_blooded
				remove_trait = fecund
			}
		}
		else = {
			remove_trait = physique_good_3
			remove_trait = intellect_good_3
			remove_trait = beauty_good_3
			remove_trait = pure_blooded
			remove_trait = fecund
		}
	}
}

### Add Bad Health Traits
DI_present_health_add_bad_genes = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_health_conflict_forbadgene_effect = yes
				remove_trait = physique_good_3
				remove_trait = intellect_good_3
				remove_trait = beauty_good_3
				remove_trait = pure_blooded
				remove_trait = fecund
				add_trait = beauty_bad_3
				add_trait = intellect_bad_3
				add_trait = physique_bad_3
				add_trait = inbred
				add_trait = impotent
			}
		}
		else = {
			remove_health_conflict_forbadgene_effect = yes
			remove_trait = physique_good_3
			remove_trait = intellect_good_3
			remove_trait = beauty_good_3
			remove_trait = pure_blooded
			remove_trait = fecund
			add_trait = beauty_bad_3
			add_trait = intellect_bad_3
			add_trait = physique_bad_3
			add_trait = inbred
			add_trait = impotent
		}
	}
}

### Remove Bad Health Traits
DI_present_health_remove_bad_genes = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = { 
					has_character_flag = pinned_for_edit
				}
				remove_trait = beauty_bad_3
				remove_trait = intellect_bad_3
				remove_trait = physique_bad_3
				remove_trait = inbred
				remove_trait = impotent
			}
		}
		else = {
			remove_trait = beauty_bad_3
			remove_trait = intellect_bad_3
			remove_trait = physique_bad_3
			remove_trait = inbred
			remove_trait = impotent
		}
	}
}

### No stress change
DI_present_health_add_no_stress_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				add_character_modifier = no_stress_change 
			}
		}
		else = {
			add_character_modifier = no_stress_change
		}
	}
}

DI_present_health_remove_no_stress_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_character_modifier = no_stress_change 
			}
		}
		else = {
			remove_character_modifier = no_stress_change
		}
	}
}

### No tyranny change
DI_present_health_add_no_tyranny_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				add_character_modifier = no_tyranny_change 
			}
		}
		else = {
			add_character_modifier = no_tyranny_change
		}
	}
}

DI_present_health_remove_no_tyranny_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_character_modifier = no_tyranny_change 
			}
		}
		else = {
			remove_character_modifier = no_tyranny_change
		}
	}
}

### No dread change
DI_present_health_add_no_dread_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				add_character_modifier = no_dread_change 
			}
		}
		else = {
			add_character_modifier = no_dread_change
		}
	}
}

DI_present_health_remove_no_dread_change = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_character_modifier = no_dread_change 
			}
		}
		else = {
			remove_character_modifier = no_dread_change
		}
	}
}

### Randomize Three Personality Traits
DI_present_traits_randomize = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				clear_personality_traits_effect = yes
				personality_trait_randomizer_effect = yes
			}
		}
		else = {
			clear_personality_traits_effect = yes
			personality_trait_randomizer_effect = yes
		}
	}
}

### Add Special Mod Traits
DI_present_traits_add_special = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				add_trait = immortal
				set_immortal_age = 30
				add_trait = 100_stat_man
				add_trait = nnn_challenger
				add_trait = build_speed_cheat
				add_trait = stress_gain_remove
				add_trait = tyranny_gain_remove
			}
		}
		else = {
			add_trait = immortal
			set_immortal_age = 30
			add_trait = 100_stat_man
			add_trait = nnn_challenger
			add_trait = build_speed_cheat
			add_trait = stress_gain_remove
			add_trait = tyranny_gain_remove
		}
	}
}

### Remove Special Mod Traits
DI_present_traits_remove_special = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_trait = immortal
				remove_trait = 100_stat_man
				remove_trait = nnn_challenger
				remove_trait = build_speed_cheat
				remove_trait = stress_gain_remove
				remove_trait = tyranny_gain_remove
			}
		}
		else = {
			remove_trait = immortal
			remove_trait = 100_stat_man
			remove_trait = nnn_challenger
			remove_trait = build_speed_cheat
			remove_trait = stress_gain_remove
			remove_trait = tyranny_gain_remove
		}
	}
}

### Add All Commander Traits
DI_present_traits_add_commander = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				add_commander_traits_effect = yes
			}
		}
		else = {
			add_commander_traits_effect = yes
		}
	}
}

### Remove All Commander Traits
DI_present_traits_remove_commander = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_commander_traits_effect = yes
			}
		}
		else = {
			remove_commander_traits_effect = yes
		}
	}
}

### Add Character traits that make the character a giant
DI_present_traits_add_giant = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_trait = dwarf
				remove_trait = physique_good_1
				remove_trait = physique_good_2
				remove_trait = physique_bad_1
				remove_trait = physique_bad_2
				remove_trait = physique_bad_3
				change_current_weight = 100
				add_trait = physique_good_3
				add_trait = giant
			}
		}
		else = {
			remove_trait = dwarf
			remove_trait = physique_good_1
			remove_trait = physique_good_2
			remove_trait = physique_bad_1
			remove_trait = physique_bad_2
			remove_trait = physique_bad_3
			change_current_weight = 100
			add_trait = physique_good_3
			add_trait = giant
		}
	}
}

### Remove Traits Giant
DI_present_traits_remove_giant = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				set_weight_0 = yes
				remove_trait = physique_good_3
				remove_trait = giant
			}
		}
		else = {
			set_weight_0 = yes
			remove_trait = physique_good_3
			remove_trait = giant
		}
	}
}

### Add Character traits that make the character a midget
DI_present_traits_add_midget = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_trait = giant
				remove_trait = physique_good_1
				remove_trait = physique_good_2
				remove_trait = physique_good_3
				remove_trait = physique_bad_1
				remove_trait = physique_bad_2
				change_current_weight = 0
				add_trait = physique_bad_3
				add_trait = dwarf
			}
		}
		else = {
			remove_trait = giant
			remove_trait = physique_good_1
			remove_trait = physique_good_2
			remove_trait = physique_good_3
			remove_trait = physique_bad_1
			remove_trait = physique_bad_2
			change_current_weight = 0
			add_trait = physique_bad_3
			add_trait = dwarf
		}
	}
}

### Remove Traits Midget
DI_present_traits_remove_midget = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_trait = physique_bad_3
				remove_trait = dwarf
			}
		}
		else = {
			remove_trait = physique_bad_3
			remove_trait = dwarf
		}
	}
}

### Add Character traits that make the character ghostly
DI_present_traits_add_ghostly = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				change_current_weight = 0
				add_trait = albino
				add_trait = spindly
			}
		}
		else = {
			change_current_weight = 0
			add_trait = albino
			add_trait = spindly
		}
	}
}

### Remove Traits Ghostly
DI_present_traits_remove_ghostly = {
	scope = character

	effect = {
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				remove_trait = albino
				remove_trait = spindly
			}
		}
		else = {
			remove_trait = albino
			remove_trait = spindly
		}
	}
}

### Present Innovation Remove All Innovations
DI_present_remove_all_innovations = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target

				scope:target.culture = {
					innovation_remove_all_effect = yes
				}
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_remove_all_effect = yes
			}
		}
	}
}

### Present Innovation Add All Regional Innovations
DI_present_innovation_regional = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target

				scope:target.culture = {
					innovation_tribal_regional_effect = yes
					innovation_early_medieval_regional_effect = yes
					innovation_high_medieval_regional_effect = yes
					innovation_late_medieval_regional_effect = yes
				}
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_tribal_regional_effect = yes
				innovation_early_medieval_regional_effect = yes
				innovation_high_medieval_regional_effect = yes
				innovation_late_medieval_regional_effect = yes
			}
		}
	}
}

### Present Innovation Add All Local Innovations
DI_present_innovation_local = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_tribal_effect = yes
					innovation_early_medieval_effect = yes
					innovation_high_medieval_effect = yes
					innovation_late_medieval_effect = yes
				}
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_tribal_effect = yes
				innovation_early_medieval_effect = yes
				innovation_high_medieval_effect = yes
				innovation_late_medieval_effect = yes
			}
		}
	}
}

### Add Regional Tribal Innovations
DI_present_innovation_regional_tribal = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_tribal_regional_effect = yes	
				}	
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_tribal_regional_effect = yes
			}
		}
	}
}

### Add Regional Early Medieval Innovations
DI_present_innovation_regional_early = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_early_medieval_regional_effect = yes		
				}
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_early_medieval_regional_effect = yes
			}
		}
	}
}

### Add Regional High Medieval Innovations
DI_present_innovation_regional_high = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_high_medieval_regional_effect = yes	
				}	
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_high_medieval_regional_effect = yes
			}
		}
	}
}

### Add Regional Late Medieval Innovations
DI_present_innovation_regional_late = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_late_medieval_regional_effect = yes	
				}	
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_late_medieval_regional_effect = yes
			}
		}
	}
}

### Add All Local Tribal Innovations
DI_present_innovation_tribal = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_tribal_effect = yes	
				}	
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_tribal_effect = yes
			}
		}
	}
}

### Add All Local Early Medieval Innovations
DI_present_innovation_early = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_early_medieval_effect = yes	
				}	
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_early_medieval_effect = yes
			}
		}
	}
}

### Add All Local High Medieval Innovations
DI_present_innovation_high = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_high_medieval_effect = yes	
				}	
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_high_medieval_effect = yes
			}
		}
	}
}

### Add All Local Late Medieval Innovations
DI_present_innovation_late = {
	scope = character

	effect = {
		save_scope_as = root_target
		
		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_living_character = {
				limit = {
					has_character_flag = pinned_for_edit
				}
				save_scope_as = target
				
				scope:target.culture = {
					innovation_late_medieval_effect = yes
				}		
			}
		}
		else = {
			scope:root_target.culture = {
				innovation_late_medieval_effect = yes
			}
		}
	}
}

### Present Laws ###
DI_present_laws_gender_equality = {
	scope = faith #Faith of the player

	saved_scopes = {
		culture #Culture of the player
		target #Target of the player
	} 

	effect = {
		## DOCTRINE_GENDER
		if = {
			limit = { has_doctrine = doctrine_gender_male_dominated }
			remove_doctrine = doctrine_gender_male_dominated
		}
		else_if = {
			limit = { has_doctrine = doctrine_gender_female_dominated }
			remove_doctrine = doctrine_gender_female_dominated
		}

		if = {
			limit = { NOT = { has_doctrine = doctrine_gender_equal } }
			add_doctrine = doctrine_gender_equal
		}

		## DOCTRINE_CLERICAL_GENDER
		if = {
			limit = { has_doctrine = doctrine_clerical_gender_male_only }
			remove_doctrine = doctrine_clerical_gender_male_only
		}
		else_if = {
			limit = { has_doctrine = doctrine_clerical_gender_female_only }
			remove_doctrine = doctrine_clerical_gender_female_only
		}

		if = {
			limit = { NOT = { has_doctrine = doctrine_clerical_gender_either } }
			add_doctrine = doctrine_clerical_gender_either
		}


		## DOCTRINE_ADULTERY_MEN & DOCTRINE_ADULTERY_WOMEN
		#Makes the adultery doctrine same for both genders (picks lesser version)

		#Any of them accepted? Both should be accepted
		if = {
			limit = {
				OR = {
					has_doctrine = doctrine_adultery_men_accepted
					has_doctrine = doctrine_adultery_women_accepted
				}
			}

			#Is male wrong?
			if = {
				limit = { NOT = { has_doctrine = doctrine_adultery_men_accepted } }

				if = {
					limit = { has_doctrine = doctrine_adultery_men_crime }
					remove_doctrine = doctrine_adultery_men_crime
				}
				else_if = {
					limit = { has_doctrine = doctrine_adultery_men_shunned }
					remove_doctrine = doctrine_adultery_men_shunned
				}
				add_doctrine = doctrine_adultery_men_accepted
			}

			#Is female wrong?
			if = {
				limit = { NOT = { has_doctrine = doctrine_adultery_women_accepted } }

				if = {
					limit = { has_doctrine = doctrine_adultery_women_crime }
					remove_doctrine = doctrine_adultery_women_crime
				}
				else_if = {
					limit = { has_doctrine = doctrine_adultery_women_shunned }
					remove_doctrine = doctrine_adultery_women_shunned
				}
				add_doctrine = doctrine_adultery_women_accepted
			}
		}
		##Any of them shunned? Both should be shunned
		else_if = {
			limit = {
				OR = {
					has_doctrine = doctrine_adultery_men_shunned
					has_doctrine = doctrine_adultery_women_shunned
				}
			}

			#Is male wrong?
			if = {
				limit = { NOT = { has_doctrine = doctrine_adultery_men_shunned } }
				remove_doctrine = doctrine_adultery_men_crime
				add_doctrine = doctrine_adultery_men_shunned
			}

			#Is female wrong?
			if = {
				limit = { NOT = { has_doctrine = doctrine_adultery_women_shunned } }
				remove_doctrine = doctrine_adultery_women_crime
				add_doctrine = doctrine_adultery_women_shunned
			}
		}
		##Else: they're both criminal, nothing to do here

		scope:target = {
			if = {
				limit = {
					OR = {
						has_realm_law = male_preference_law
						has_realm_law = female_preference_law
						has_realm_law = female_only_law
						has_realm_law = male_only_law
					}
				}
				add_realm_law = equal_law
			}
		}

		scope:culture = {
			if = {
				limit = {
					OR = {
						has_cultural_pillar = martial_custom_male_only
						has_cultural_pillar = martial_custom_female_only
					}
				}
				set_culture_pillar = martial_custom_equal
			}
		}
	}
}

DI_present_laws_gender_inverse = {
	scope = faith #Faith of the player

	saved_scopes = {
		culture # Culture of the player
		target # The player
	}

	effect = {
		## DOCTRINE_GENDER
		if = {
			limit = { has_doctrine = doctrine_gender_male_dominated }
			remove_doctrine = doctrine_gender_male_dominated
			add_doctrine = doctrine_gender_female_dominated
		}
		else_if = {
			limit = { has_doctrine = doctrine_gender_female_dominated }
			remove_doctrine = doctrine_gender_female_dominated
			add_doctrine = doctrine_gender_male_dominated
		}
		#Else: equal, do nothing

		## DOCTRINE_CLERICAL_GENDER
		if = {
			limit = { has_doctrine = doctrine_clerical_gender_male_only }
			remove_doctrine = doctrine_clerical_gender_male_only
			add_doctrine = doctrine_clerical_gender_female_only
		}
		else_if = {
			limit = { has_doctrine = doctrine_clerical_gender_female_only }
			remove_doctrine = doctrine_clerical_gender_female_only
			add_doctrine = doctrine_clerical_gender_male_only
		}
		#Else: either, do nothing

		## DOCTRINE_ADULTERY_MEN & DOCTRINE_ADULTERY_WOMEN
		# Men and women swap doctrine
		if = {
			limit = {
				NOR = {
					AND = {
						has_doctrine = doctrine_adultery_women_accepted
						has_doctrine = doctrine_adultery_men_accepted
					}
					AND = {
						has_doctrine = doctrine_adultery_women_shunned
						has_doctrine = doctrine_adultery_men_shunned
					}
					AND = {
						has_doctrine = doctrine_adultery_women_crime
						has_doctrine = doctrine_adultery_men_crime
					}
				}
			}
			# Save women's doctrine
			if = {
				limit = { has_doctrine = doctrine_adultery_women_accepted }
				save_scope_value_as = {
					name = doctrine_adultery_women
					value = flag:doctrine_adultery_women_accepted
				}
			}
			else_if = {
				limit = {  has_doctrine = doctrine_adultery_women_shunned }
				save_scope_value_as = {
					name = doctrine_adultery_women
					value = flag:doctrine_adultery_women_shunned
				}
			}
			else_if = {
				limit = {  has_doctrine = doctrine_adultery_women_crime }
				save_scope_value_as = {
					name = doctrine_adultery_women
					value = flag:doctrine_adultery_women_crime
				}
			}

			# Give women mens' doctrine
			if = {
				limit = { has_doctrine = doctrine_adultery_men_accepted }
				if = {
					limit = { has_doctrine = doctrine_adultery_women_shunned }
					remove_doctrine = doctrine_adultery_women_shunned
				}
				else_if = {
					limit = { has_doctrine = doctrine_adultery_women_crime }
					remove_doctrine = doctrine_adultery_women_crime
				}
				add_doctrine = doctrine_adultery_women_accepted
			}
			else_if = {
				limit = { has_doctrine = doctrine_adultery_men_shunned }
				if = {
					limit = { has_doctrine = doctrine_adultery_women_accepted }
					remove_doctrine = doctrine_adultery_women_accepted
				}
				else_if = {
					limit = { has_doctrine = doctrine_adultery_women_crime }
					remove_doctrine = doctrine_adultery_women_crime
				}
				add_doctrine = doctrine_adultery_women_shunned
			}
			else_if = {
				limit = { has_doctrine = doctrine_adultery_men_crime }
				if = {
					limit = { has_doctrine = doctrine_adultery_women_accepted }
					remove_doctrine = doctrine_adultery_women_accepted
				}
				else_if = {
					limit = { has_doctrine = doctrine_adultery_women_shunned }
					remove_doctrine = doctrine_adultery_women_shunned
				}
				add_doctrine = doctrine_adultery_women_crime
			}

			# Give men women' doctrine
			if = {
				limit = { scope:doctrine_adultery_women = flag:doctrine_adultery_women_accepted }
				if = {
					limit = { has_doctrine = doctrine_adultery_men_shunned }
					remove_doctrine = doctrine_adultery_men_shunned
				}
				else_if = {
					limit = { has_doctrine = doctrine_adultery_men_crime }
					remove_doctrine = doctrine_adultery_men_crime
				}
				add_doctrine = doctrine_adultery_men_accepted
			}
			else_if = {
				limit = { scope:doctrine_adultery_women = flag:doctrine_adultery_women_shunned }
				if = {
					limit = { has_doctrine = doctrine_adultery_men_accepted }
					remove_doctrine = doctrine_adultery_men_accepted
				}
				else_if = {
					limit = { has_doctrine = doctrine_adultery_men_crime }
					remove_doctrine = doctrine_adultery_men_crime
				}
				add_doctrine = doctrine_adultery_men_shunned
			}
			else_if = {
				limit = { scope:doctrine_adultery_women = flag:doctrine_adultery_women_crime }
				if = {
					limit = { has_doctrine = doctrine_adultery_men_accepted }
					remove_doctrine = doctrine_adultery_men_accepted
				}
				else_if = {
					limit = { has_doctrine = doctrine_adultery_men_shunned }
					remove_doctrine = doctrine_adultery_men_shunned
				}
				add_doctrine = doctrine_adultery_men_crime
			}
		}

		scope:target = {
			# Take care of any titles with their own title laws.
			every_held_title = {
				limit = { can_title_have_law_general_trigger = yes }
				# Invert male-only.
				if = {
					limit = { has_title_law = male_only_law }
					remove_title_law = male_only_law
					add_title_law = female_only_law
				}
				# Invert female-only.
				else_if = {
					limit = { has_title_law = female_only_law }
					remove_title_law = female_only_law
					add_title_law = male_only_law
				}
			}
			# Now realm law.
			if = {
				limit = { has_realm_law = male_only_law }
				add_realm_law = female_only_law
				if = {
					limit = {
						highest_held_title_tier >= tier_county
						is_male = yes
						is_ai = yes
						any_heir = { is_female = yes }
					}
					depose = yes
				}
			}
			else_if = {
				limit = { has_realm_law = male_preference_law }
				add_realm_law = female_preference_law
				if = {
					limit = {
						highest_held_title_tier >= tier_county
						is_male = yes
						is_ai = yes
						any_heir = { is_female = yes }
					}
					depose = yes
				}
			}
			else_if = {
				limit = { has_realm_law = female_preference_law }
				add_realm_law = male_preference_law
				if = {
					limit = {
						highest_held_title_tier >= tier_county
						is_female = yes
						is_ai = yes
						any_heir = { is_male = yes }
					}
					depose = yes
				}
			}
			else_if = {
				limit = { has_realm_law = female_only_law }
				add_realm_law = male_only_law
				if = {
					limit = {
						highest_held_title_tier >= tier_county
						is_female = yes
						is_ai = yes
						any_heir = { is_male = yes }
					}
					depose = yes
				}
			}
			#Else: equal, nothing changes
		}

		if = {
			limit = {
				has_doctrine = doctrine_clerical_gender_male_only
				religious_head ?= { is_female = yes }
			}
			religious_head = { depose = yes }
		}
		else_if = {
			limit = {
				has_doctrine = doctrine_clerical_gender_female_only
				religious_head ?= { is_male = yes }
			}
			religious_head = { depose = yes }
		}

		scope:culture = {
			if = {
				limit = { has_cultural_pillar = martial_custom_male_only }
				set_culture_pillar = martial_custom_female_only
			}
			else_if = {
				limit = { has_cultural_pillar = martial_custom_female_only }
				set_culture_pillar = martial_custom_male_only
			}
		}
	}
}

DI_present_laws_gender_female_dominated = {
	scope = faith # Player faith

	saved_scopes = {
		culture # Player culture
		target # Player
	} 

	effect = {
		## DOCTRINE_GENDER
		if = {
			limit = { has_doctrine = doctrine_gender_equal }
			remove_doctrine = doctrine_gender_equal
		}
		else_if = {
			limit = { has_doctrine = doctrine_gender_male_dominated }
			remove_doctrine = doctrine_gender_male_dominated
		}

		if = {
			limit = { NOT = { has_doctrine = doctrine_gender_female_dominated } }
			add_doctrine = doctrine_gender_female_dominated
		}

		## DOCTRINE_CLERICAL_GENDER
		if = {
			limit = { has_doctrine = doctrine_clerical_gender_male_only }
			remove_doctrine = doctrine_clerical_gender_male_only
		}
		else_if = {
			limit = { has_doctrine = doctrine_clerical_gender_either }
			remove_doctrine = doctrine_clerical_gender_either
		}

		if = {
			limit = { NOT = { has_doctrine = doctrine_clerical_gender_female_only } }
			add_doctrine = doctrine_clerical_gender_female_only
		}


		## DOCTRINE_ADULTERY_MEN & DOCTRINE_ADULTERY_WOMEN
		# Remove accepted for men, add shunned
		# Add accepted for women, remove shunned
		if = {
			limit = {
				has_doctrine = doctrine_adultery_women_shunned
			}
			remove_doctrine = doctrine_adultery_women_shunned
		}
		if = {
			limit = {
				has_doctrine = doctrine_adultery_women_crime
			}
			remove_doctrine = doctrine_adultery_women_crime
		}
		if = {
			limit = {
				NOT = {
					has_doctrine = doctrine_adultery_women_accepted
				}
			}
			add_doctrine = doctrine_adultery_women_accepted
		}
		if = {
			limit = {
				has_doctrine = doctrine_adultery_men_accepted
			}
			remove_doctrine = doctrine_adultery_men_accepted
		}
		if = {
			limit = {
				NOT = {
					has_doctrine = doctrine_adultery_men_shunned
				}
			}
			add_doctrine = doctrine_adultery_men_shunned
		}

		if = {
			limit = {
				has_doctrine = doctrine_clerical_gender_female_only
				religious_head ?= { is_male = yes }
			}
			religious_head = { depose = yes }
		}

		scope:culture = {
			if = {
				limit = { has_cultural_pillar = martial_custom_male_only }
				set_culture_pillar = martial_custom_female_only
			}
			else_if = {
				limit = { has_cultural_pillar = martial_custom_female_only }
				set_culture_pillar = martial_custom_male_only
			}
		}

		scope:target = {
			if = {
				limit = {
					OR = {
						has_realm_law = male_preference_law
						has_realm_law = male_only_law
						has_realm_law = female_preference_law
						has_realm_law = equal_law
					}
				}
				add_realm_law = female_only_law
			}
		}

		scope:culture = {
			if = {
				limit = {
					OR = {
						has_cultural_pillar = martial_custom_male_only
						has_cultural_pillar = martial_custom_equal
					}
				}
				set_culture_pillar = martial_custom_female_only
			}
		}
	}
}

DI_present_laws_gender_male_dominated = {
	scope = faith # Player faith

	saved_scopes = {
		culture # Player culture
		target # Player
	} 

	effect = {
		## DOCTRINE_GENDER
		if = {
			limit = { has_doctrine = doctrine_gender_equal }
			remove_doctrine = doctrine_gender_equal
		}
		else_if = {
			limit = { has_doctrine = doctrine_gender_female_dominated }
			remove_doctrine = doctrine_gender_female_dominated
		}

		if = {
			limit = { NOT = { has_doctrine = doctrine_gender_male_dominated } }
			add_doctrine = doctrine_gender_male_dominated
		}

		## DOCTRINE_CLERICAL_GENDER
		if = {
			limit = { has_doctrine = doctrine_clerical_gender_female_only }
			remove_doctrine = doctrine_clerical_gender_female_only
		}
		else_if = {
			limit = { has_doctrine = doctrine_clerical_gender_either }
			remove_doctrine = doctrine_clerical_gender_either
		}

		if = {
			limit = { NOT = { has_doctrine = doctrine_clerical_gender_male_only } }
			add_doctrine = doctrine_clerical_gender_male_only
		}


		## DOCTRINE_ADULTERY_MEN & DOCTRINE_ADULTERY_WOMEN
		# Remove accepted for women, add shunned
		# Add accepted for men, remove shunned
		if = {
			limit = {
				has_doctrine = doctrine_adultery_men_shunned
			}
			remove_doctrine = doctrine_adultery_men_shunned
		}
		if = {
			limit = {
				has_doctrine = doctrine_adultery_men_crime
			}
			remove_doctrine = doctrine_adultery_men_crime
		}
		if = {
			limit = {
				NOT = {
					has_doctrine = doctrine_adultery_men_accepted
				}
			}
			add_doctrine = doctrine_adultery_men_accepted
		}
		if = {
			limit = {
				has_doctrine = doctrine_adultery_women_accepted
			}
			remove_doctrine = doctrine_adultery_women_accepted
		}
		if = {
			limit = {
				NOT = {
					has_doctrine = doctrine_adultery_women_shunned
				}
			}
			add_doctrine = doctrine_adultery_women_shunned
		}

		if = {
			limit = {
				has_doctrine = doctrine_clerical_gender_male_only
				religious_head ?= { is_female = yes }
			}
			religious_head = { depose = yes }
		}

		scope:target = {
			if = {
				limit = {
					OR = {
						has_realm_law = male_preference_law
						has_realm_law = female_only_law
						has_realm_law = female_preference_law
						has_realm_law = equal_law
					}
				}
				add_realm_law = male_only_law
			}
		}

		scope:culture = {
			if = {
				limit = {
					OR = {
						has_cultural_pillar = martial_custom_female_only
						has_cultural_pillar = martial_custom_equal
					}
				}
				set_culture_pillar = martial_custom_male_only
			}
		}
	}
}

# temporal head of faith
DI_present_laws_temporal_hof = {
	scope = faith # Player faith

	saved_scopes = {
		culture # Player culture
		target # Player
	}

	effect = {
		if = {
			limit = {
				OR = {
					has_doctrine = doctrine_clerical_succession_spiritual_fixed_appointment
					has_doctrine = doctrine_clerical_succession_spiritual_appointment
					has_doctrine = doctrine_clerical_succession_temporal_fixed_appointment
				}
			}
			if = {
				limit = {
					has_doctrine = doctrine_clerical_succession_spiritual_fixed_appointment
				}
				remove_doctrine = doctrine_clerical_succession_spiritual_fixed_appointment
			}
			else_if = {
				limit = {
					has_doctrine = doctrine_clerical_succession_spiritual_appointment
				}
				remove_doctrine = doctrine_clerical_succession_spiritual_appointment
			}
			else_if = {
				limit = {
					has_doctrine = doctrine_clerical_succession_temporal_fixed_appointment
				}
				remove_doctrine = doctrine_clerical_succession_temporal_fixed_appointment
			}
			add_doctrine = doctrine_clerical_succession_temporal_appointment
		}
		
		if = {
			limit = {
				has_doctrine = doctrine_theocracy_temporal
			}
			remove_doctrine = doctrine_theocracy_temporal
			add_doctrine = doctrine_theocracy_lay_clergy
		}

		if = {
			limit = {
				OR = {
					has_doctrine = doctrine_no_head
					has_doctrine = doctrine_spiritual_head
				}
			}
			if = {
				limit = {
					has_doctrine = doctrine_no_head
				}
				remove_doctrine = doctrine_no_head
			}
			else_if = {
				limit = {
					has_doctrine = doctrine_spiritual_head
				}
				remove_doctrine = doctrine_spiritual_head
			}
			add_doctrine = doctrine_temporal_head
		}

		if = {
			limit = {
				has_doctrine = doctrine_temporal_head
			}

			set_religious_head_title = scope:target.primary_title
		}
	}
}